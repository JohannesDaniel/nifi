<!DOCTYPE html>
<html lang="en">
    <!--
      Licensed to the Apache Software Foundation (ASF) under one or more
      contributor license agreements.  See the NOTICE file distributed with
      this work for additional information regarding copyright ownership.
      The ASF licenses this file to You under the Apache License, Version 2.0
      (the "License"); you may not use this file except in compliance with
      the License.  You may obtain a copy of the License at
          http://www.apache.org/licenses/LICENSE-2.0
      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
    -->
    <head>
        <meta charset="utf-8"/>
        <title>XMLReader</title>
        <link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"/>
    </head>

    <body>
    <p>
        The XMLReader Controller Service reads XML content and creates Record objects. The Controller Service
        must be configured with a schema that describes the structure of the XML data. Fields in the XML data
        that are not defined in the schema will be skipped.
    </p>
    <p>
        Records are expected in the second level of the XML data, embedded within an enclosing root tag:
    </p>
    <code>
            <pre>
                &lt;root&gt;
                  &lt;record&gt;
                    &lt;field1&gt;content&lt;/field1&gt;
                    &lt;field2&gt;content&lt;/field2&gt;
                  &lt;/record&gt;
                  &lt;record&gt;
                    &lt;field1&gt;content&lt;/field1&gt;
                    &lt;field2&gt;content&lt;/field2&gt;
                  &lt;/record&gt;
                &lt;/root&gt;
            </pre>
    </code>

    <h2>Simple Types</h2>

    <p>
        The simplest kind of data within XML data are tags / fields only containing content (no attributes, no embedded tags).
        They can be described in the schema by simple types (e. g. INT, STRING, ...).
    </p>

    <code>
            <pre>
                &lt;record&gt;
                  &lt;field1&gt;content&lt;/field1&gt;
                &lt;/record&gt;
            </pre>
    </code>

    <p>
        This record can be described by a schema containing one field (e. g. of type string). By providing this schema,
        the reader expects zero or one occurrences of "field1" in the record.
    </p>

    <code>
            <pre>
                {
                  "namespace": "nifi",
                  "name": "person",
                  "type": "record",
                  "fields": [
                    { "name": "field1", "type": "string" }
                  ]
                }
            </pre>
    </code>

    <h2>Arrays with Simple Types</h2>

    <p>
        Arrays are considered as repetitive tags / fields in XML data. For the following XML data, "field1" is considered
        to be an array enclosing data of a simple type, whereas "field2" is considered to be a simple type not enclosed in
        an array.
    </p>

    <code>
            <pre>
                &lt;record&gt;
                  &lt;field1&gt;content&lt;/field1&gt;
                  &lt;field1&gt;content&lt;/field1&gt;
                  &lt;field2&gt;content&lt;/field1&gt;
                &lt;/record&gt;
            </pre>
    </code>

    <p>
        This record can be described by the following schema:
    </p>

    <code>
            <pre>
                {
                  "namespace": "nifi",
                  "name": "person",
                  "type": "record",
                  "fields": [
                    { "name": "field1", "type":
                      { "type": "array", "items": string }
                    },
                    { "name": "field2", "type": "string" }
                  ]
                }
            </pre>
    </code>

    <p>
        If a field in a schema is embedded in an array, the reader expects zero, one or more occurrences of the field
        in a record. The field "field1" principally also could be defined as a simple type, but then the second occurrence
        would replace the first in the record object. Moreover, the field "field2" could also be defined as an array.
        In this case, the reader would put it into the record object as an array with one element.
    </p>

    <h2>Simple Types with Attributes</h2>

    <p>
        The simplest kind of data within XML data are tags only containing content (no attributes, no embedded tags).
        They can be described in the schema by simple types (e. g. INT, STRING, ...).
    </p>


    </body>
</html>
